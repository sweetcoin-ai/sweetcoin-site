
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Claim Sweetcoin</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/ethers/dist/ethers.min.js"></script>
  <style>
    body { font-family: sans-serif; }
    .container {
      max-width: 800px;
      margin: 80px auto;
      padding: 20px;
      font-size: 18px;
      line-height: 1.8;
      text-align: center;
    }
    .btn-yellow {
      background-color: #facc15;
      color: #000;
      padding: 12px 28px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      text-decoration: none;
    }
    .fade-out {
      opacity: 0;
      transition: opacity 1s ease;
    }
    .hidden { display: none; }
    footer {
      margin-top: 60px;
      padding: 20px;
      background: #f4f4f4;
      text-align: center;
    }
  </style>
</head>
<body>
<header>
  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="whitepaper.html">Whitepaper</a></li>
      <li><a href="claim.html">Claim</a></li>
    </ul>
  </nav>
</header>

<section class="container" id="introSection">
  <h1>Claim Sweetcoin (SWTC)</h1>
  <p>Why choose Sweetcoin?</p>
  <ul style="text-align: left; max-width: 600px; margin: auto;">
    <li>üíé A decentralized stablecoin governed by AI ‚Äî no banks or governments.</li>
    <li>üç¶ Pegged to the global average price of an ice cream cone ‚Äî fair and intuitive.</li>
    <li>üß† AI and public consensus ensure transparency ‚Äî no central control, no hidden rules.</li>
    <li>üöÄ Real-world payments with QR support and fast transactions via BSC.</li>
    <li>üåç Designed to become a universal unit of value in decentralized commerce.</li>
  </ul>
  <p style="margin-top: 20px;">
    Be among the first holders. Get 20 free SWTC now and join the financial future.
  </p>
  <div style="margin-top: 30px;">
    <button class="btn-yellow" onclick="revealClaim()">I understand, continue</button>
  </div>
</section>

<section class="container hidden" id="claimSection">
  <h2>Claim Your Tokens</h2>
  <p>Click the button below to connect your wallet and claim <strong>20 SWTC</strong>.</p>
  <button id="actionButton" class="btn-yellow">Connect Wallet</button>
  <p id="statusMessage" style="margin-top: 20px; color: #333;"></p>
</section>

<footer>
  <p>&copy; 2025 Sweetcoin. All rights reserved.</p>
</footer>

<script>
  const CONTRACT_ADDRESS = "0x005A04acdC294f20f7Ab60fd51525299838393B3";
  const CONTRACT_ABI = ["function claim() external"];
  let provider, signer, contract;
  let walletConnected = false;
  let claimed = false;

  function revealClaim() {
    const intro = document.getElementById("introSection");
    intro.classList.add("fade-out");
    setTimeout(() => {
      intro.classList.add("hidden");
      document.getElementById("claimSection").classList.remove("hidden");
    }, 1000);
  }

  async function handleAction() {
    const button = document.getElementById("actionButton");
    if (!walletConnected) {
      try {
        await window.ethereum.request({ method: "eth_requestAccounts" });
        provider = new ethers.providers.Web3Provider(window.ethereum);
        signer = provider.getSigner();
        contract = new ethers.Contract(CONTRACT_ADDRESS, CONTRACT_ABI, signer);
        const userAddress = await signer.getAddress();
        document.getElementById("statusMessage").textContent = "Connected: " + userAddress;
        walletConnected = true;
        button.textContent = "Claim 20 SWTC";
      } catch (err) {
        document.getElementById("statusMessage").textContent = "Connection failed: " + err.message;
      }
    } else if (!claimed) {
      try {
        const network = await provider.getNetwork();
        if (network.chainId !== 56) {
          document.getElementById("statusMessage").textContent = "Please switch to BSC Mainnet.";
          return;
        }
        document.getElementById("statusMessage").textContent = "Processing transaction...";
        const tx = await contract.claim();
        await tx.wait();
        document.getElementById("statusMessage").textContent = "Success! 20 SWTC claimed üéâ";
        claimed = true;
        button.disabled = true;
      } catch (err) {
        document.getElementById("statusMessage").textContent = "Claim failed: " + (err.error?.message || err.message);
      }
    }
  }

  document.getElementById("actionButton").addEventListener("click", handleAction);
</script>
</body>
</html>
